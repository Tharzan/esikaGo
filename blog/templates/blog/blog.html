{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"   media="(max-width:900px)" href="{% static 'blog/css/blog_mobile.css' %}">
    <link rel="stylesheet"  media="(min-width:900px)"  href="{% static 'blog/css/blog.css' %}">
    
    <link rel="stylesheet"   media="(min-width:900px)" href="{% static 'css/menu_desktop.css' %}">
    <link rel="stylesheet"   media="(max-width:900px)" href="{% static 'css/menu_mobile.css' %}">
   
    <title>EsikaApp</title>

</head>
<body>

    <div id="page_">

        {% include 'menu_desktop.html' %}

        <div id="cacher"></div>
        {% include 'petit_menu_ordi.html' %}
        {% include 'dashboard_blog.html' %}
    <div class="container">
        <h1>Programme de la Journée</h1> 

        <div class="intro-message">
            <p>Bonjour ! Voici un aperçu des activités et des indicateurs clés pour la journée du <span id="current-date"></span>.</p>
        </div>

        <div class="reservation-container">
            <section class="reservation-section">
                <div class="reservation-header">
                    <h2>Réservations du jour</h2>
                    <p>Statistiques et aperçu des réservations pour aujourd'hui.</p>
                </div>
    
                <div class="stats-grid">
                    <div class="stat-card total-confirmed">
                        <h3>Confirmées</h3>
                        <p>45</p>
                    </div>
                    <div class="stat-card total-cancelled">
                        <h3>Annulées</h3>
                        <p>8</p>
                    </div>
                    <div class="stat-card total-pending">
                        <h3>En attente</h3>
                        <p>12</p>
                    </div>
                    <div class="stat-card total-pending">
                        <h3>Total</h3>
                        <p>65</p>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>Répartition des réservations</h3>
                    <canvas id="reservationsPieChart"></canvas>
                </div>
    
                <a href="#" class="details-button">Voir les détails</a>
    
            </section>
        </div>

        <div class="section presence sroll-section">
            <div class="section-header">
                <h3>Statistiques de Présence</h3>
            </div>
            <div class="stat-grid">
                <div class="stat-card">
                    <div class="value" style="color:blue">95</div>
                    <div class="label">Personnes attendues</div>
                </div>
                <div class="stat-card">
                    <div class="value" style="color: green;">78</div>
                    <div class="label">Présences confirmées</div>
                </div>
                <div class="stat-card">
                    <div class="value" style="color: red;">82%</div>
                    <div class="label">Taux de présence</div>
                </div>
            </div>
        </div>

        <div class="section alerts sroll-section">
            <div class="section-header">
                <h3>Alertes et Notifications</h3>
            </div>


            <div class="stock-alert">
                <h2> <span class="alert-icon">&#9888;</span> Alerte de Stock </h2>
                <p>Attention ! Plusieurs produits ont atteint un niveau de stock critique. Il est urgent de passer commande pour éviter une rupture.</p>
                
                <p>Les produits suivants sont concernés :</p>
                <ul>
                    <li>
                        <span class="product-name">Orange</span>
                        <span class="stock-qty">5 pièces</span>
                    </li>
                    <li>
                        <span class="product-name">Banane</span>
                        <span class="stock-qty">20 pièces</span>
                    </li>
                    <li>
                        <span class="product-name">Poulet</span>
                        <span class="stock-qty">10 kg</span>
                    </li>
                </ul>
            </div>
           
            
        </div>

        <div class="container_2 sroll-section">
            <section class="blog-section">
                <div class="header">
                    <h1>Planification des Travaux</h1>
                    <p>Informations importantes concernant les projets de maintenance et d'amélioration.</p>
                </div>
                
                <div class="work-item">
                    <h3>Réhabilitation du système de climatisation</h3>
                    <div class="work-details">
                        <div class="detail-item"><strong>Date prévue :</strong> 20/09/2025</div>
                        <div class="detail-item"><strong>Budget estimé :</strong> 15 000 €</div>
                             </div>
                    <div class="description">
                        <p>Remplacement complet de l'unité de climatisation centrale par un modèle plus moderne et écoénergétique. L'objectif est d'améliorer significativement le confort thermique et de réduire l'empreinte énergétique de notre établissement.</p>
                    </div>
                </div>
    
                <div class="work-item">
                    <h3>Installation de thermostats intelligents</h3>
                    <div class="work-details">
                        <div class="detail-item"><strong>Date prévue :</strong> 20/09/2025</div>
                        <div class="detail-item"><strong>Budget estimé :</strong> 2 500 €</div>
                              </div>
                    <div class="description">
                        <p>Mise en place de thermostats connectés et programmables dans toutes les zones clés. Cette amélioration permettra un contrôle plus fin et automatisé de la température, optimisant la consommation d'énergie selon l'occupation.</p>
                    </div>
                </div>
    
                <div class="work-item">
                    <h3>Nettoyage et désinfection des conduits d'air</h3>
                    <div class="work-details">
                        <div class="detail-item"><strong>Date prévue :</strong> 20/09/2025</div>
                        <div class="detail-item"><strong>Budget estimé :</strong> 800 €</div>
                           </div>
                    <div class="description">
                        <p>Un nettoyage professionnel et une désinfection complète des systèmes de ventilation et des conduits d'air sont prévus. Cela garantira une qualité d'air optimale, réduisant les risques d'allergies et améliorant l'environnement général.</p>
                    </div>
                </div>
    
                
                
                <div class="footer">
                    <a href="#" class="read-more">Voir tous les projets planifiés</a>
                </div>
            </section>
        </div>

        <div class="section actions">
            <div class="section-header">
                <h3>Actions Rapides</h3>
            </div>
            <div class="action-buttons">
                <a href="{% url 'revenus' %}" class="btn btn-revenu">Ajouter Revenu</a>
                <a href="{% url 'depenses' %}" class="btn btn-depense">Ajouter Dépense</a>
                <a href="{% url 'dette_blog' %}" class="btn btn-dette">Ajouter Dette</a>
                {% if page.type_page == 'salon' %}
                <a href="{% url 'saveproduit_page' page='page' %}" class="btn btn-autre">Poster Un produit</a>
                {% endif %}
            </div>
        </div>

    </div>
    <script src="{% static 'java/jquery.js' %}"></script>
    <script src="{% static 'java/java_all.js' %}"></script>
    <script src="{% static 'app_general/java/app_general.js' %}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Afficher la date du jour
            document.getElementById('current-date').textContent = new Date().toLocaleDateString('fr-FR', {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            });

            // Création du graphique des stocks
            const stockData = {
                labels: ['Café', 'Sucre', 'Farine', 'Lait'],
                datasets: [{
                    label: 'Niveau de Stock (kg)',
                    data: [15, 50, 80, 20],
                    backgroundColor: [
                        'rgba(244, 67, 54, 0.6)', // Rouge pour le café (stock bas)
                        'rgba(76, 175, 80, 0.6)', // Vert pour le sucre
                        'rgba(33, 150, 243, 0.6)', // Bleu pour la farine
                        'rgba(255, 152, 0, 0.6)'  // Orange pour le lait
                    ],
                    borderColor: [
                        'rgba(244, 67, 54, 1)',
                        'rgba(76, 175, 80, 1)',
                        'rgba(33, 150, 243, 1)',
                        'rgba(255, 152, 0, 1)'
                    ],
                    borderWidth: 1
                }]
            };

            const stockConfig = {
                type: 'bar',
                data: stockData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            };

            const stockChart = new Chart(
                document.getElementById('stockChart'),
                stockConfig
            );
        });



        const ctx = document.getElementById('reservationsPieChart');

        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Confirmées', 'Annulées', 'En attente'],
                datasets: [{
                    label: 'Nombre de réservations',
                    data: [45, 8, 12],
                    backgroundColor: [
                        'rgba(40, 167, 69, 0.8)',
                        'rgba(220, 53, 69, 0.8)',
                        'rgba(255, 193, 7, 0.8)'
                    ],
                    borderColor: [
                        '#fff',
                        '#fff',
                        '#fff'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(tooltipItem) {
                                return tooltipItem.label + ': ' + tooltipItem.raw + ' réservations';
                            }
                        }
                    }
                }
            }
        });
    </script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>