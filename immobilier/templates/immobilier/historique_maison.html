{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"   media="(max-width:900px)" href="{% static 'app_general/css/horaire_mobile.css' %}">
    <link rel="stylesheet"  media="(min-width:900px)"  href="{% static 'immobilier/css/historique_maison.css' %}">
    
    <link rel="stylesheet"   media="(min-width:900px)" href="{% static 'css/menu_desktop.css' %}">
    
    <link rel="stylesheet"   media="(max-width:900px)" href="{% static 'css/menu_mobile.css' %}">
    
    <title>EsikaApp</title>
    

    
    
</head>
<body>
    <div id="page_">

        {% include 'menu_desktop.html' %}
        {% include 'menu_mobile.html' %}

        <div id="cacher"></div>

        {% include 'petit_menu_ordi_user.html' %}
    
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Tableau de Bord</h2>

                
            </div>
            
            <div class="sidebar-nav">
                
                <ol>
                    <li>
                        <a href="{% url 'gestion_user' %}">Géstion Général</a>
                    </li>
                    <li onclick="showTab('revenus')">
                        <a href="#">Revenus</a>
                    </li>
                    <li onclick="showTab('depenses')">
                        <a href="#">Dépenses</a>
                    </li>
                    <li onclick="showTab('salaires')">
                        <a href="#">Dettes</a>
                    </li>
                    <li class="active">
                        <a href="{% url 'bien_immobilier' %}">Biens et location</a>
                    </li>
                    
                </ol>
            </div>
        </aside>
        <div class="container">
            

            <h1>Gestion des Payement : <span style="font-size: 22px;color: rgb(0,0,125);">{{ payements.0.type }} - {{ payements.0.adresse }}</span> </h1>
        
            <div class="info-block">
                <div class="info-item">
                    <label>Locataire Actuel :</label>
                    <span>{{ payements.0.nom_locataire }}</span>
                </div>
                <div class="info-item">
                    <label>Montant du Loyer Mensuel :</label>
                    <span>{{ payements.0.loyer }} USD</span>
                </div>
                <div class="info-item">
                    <label>Date Début Location :</label>
                    <span>{{ payements.0.dateentrer }}</span>
                </div>
            </div>
    
            <h2>Historique des Paiements - Année {{ payements.0.annee }}</h2>
    
            <table>
                <thead>
                    <tr>
                        <th>Mois</th>
                        <th>Date Paiement</th>
                        <th>Montant Payé</th>
                        <th>Statut</th>
                        <th>Observations</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% if has_historique %}
                    {% for payement in payements %}
                    <tr>
                        <td>{{ payement.mois }}</td>
                        <td>{{ payement.date_payement }}</td>
                        <td>{{ payement.montant }} USD</td>
                        <td class="status-paid">{{ payement.status }}</td>
                        <td>{{ payement.observation }}</td>
                
                        <td class="action-buttons">
                        
                            <a href="{% url 'view_quittance' id=payement.recu %}" title="Voir">
                                <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m11.998 5c-4.078 0-7.742 3.093-9.853 6.483-.096.159-.145.338-.145.517s.048.358.144.517c2.112 3.39 5.776 6.483 9.854 6.483 4.143 0 7.796-3.09 9.864-6.493.092-.156.138-.332.138-.507s-.046-.351-.138-.507c-2.068-3.403-5.721-6.493-9.864-6.493zm.002 3c2.208 0 4 1.792 4 4s-1.792 4-4 4-4-1.792-4-4 1.792-4 4-4zm0 1.5c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5-2.5-1.12-2.5-2.5 1.12-2.5 2.5-2.5z" fill-rule="nonzero"/></svg>
                            </a>
                            <a href="" title="modifier">
                                <svg fill="rgb(0,0,125)" height="800px" width="800px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                viewBox="0 0 448.378 448.378" xml:space="preserve">
                           <path d="M405.455,296.506c-1.744-3.137-5.702-4.268-8.84-2.524l-38.438,21.365c-8.765,4.87-18.122,8.63-27.813,11.174
                               l-191.089,50.157c-3.872,1.013-7.794,1.056-11.654,0.128c-7.632-1.836-13.891-7.298-16.75-14.626
                               c-0.503-1.28-1.622-7.117-1.622-8.656c0-8.616,4.649-16.598,12.13-20.83c0.726-0.411,90.066-40.158,90.066-40.158
                               c12.298-5.476,19.955-18.17,19.053-31.585c-1.017-15.233-12.637-27.481-27.324-29.695l39.038-84.778l143.516,57.411
                               c0.792,0.316,1.608,0.467,2.412,0.467c2.579,0,5.021-1.546,6.037-4.088c1.333-3.333-0.288-7.116-3.621-8.449l-142.899-57.164
                               L295.41,30.947c2.438-5.295,2.668-11.223,0.646-16.692c-2.021-5.468-6.051-9.822-11.347-12.258
                               c-10.925-5.029-23.91-0.23-28.942,10.696l-54.169,117.64c-7.028,1.47-13.798,3.896-20.166,7.245l-80.642,42.387
                               c-22.251,11.695-38.285,32.448-43.989,56.937l-14.193,60.907c-4.128,17.701,17.909,58.698,34.477,76.077
                               c3.164,3.319,6.134,5.799,8.94,7.462l-10.201,22.152c-2.44,5.294-2.67,11.223-0.646,16.691c1.266,3.422,3.32,6.407,5.978,8.76
                               l-4.414,10.385c-1.404,3.304,0.136,7.12,3.439,8.524c0.83,0.353,1.691,0.52,2.54,0.52c2.529,0,4.934-1.485,5.985-3.959l4.31-10.14
                               c0.862,0.103,1.732,0.16,2.613,0.16c8.5,0,16.288-4.981,19.84-12.692l8.61-18.695c4.562,10.169,14.605,16.244,25.131,16.244
                               c3.664,0,7.387-0.735,10.955-2.29c7.703-3.362,13.089-9.857,15.33-17.345c0.689,0.338,1.392,0.656,2.114,0.94
                               c3.257,1.278,6.657,1.916,10.053,1.916c3.735,0,7.466-0.771,10.992-2.311c6.732-2.938,11.918-8.323,14.602-15.161
                               c0.285-0.727,0.532-1.462,0.753-2.202c3.766,1.852,7.933,2.858,12.184,2.858c3.666,0,7.393-0.738,10.963-2.296
                               c9.506-4.154,15.701-13.253,16.406-23.285l80.102-21.025c10.742-2.82,21.113-6.987,30.828-12.385l38.439-21.366
                               C406.069,303.601,407.199,299.644,405.455,296.506z M115.376,309.616c-1.654-7.582-0.419-15.461,3.479-22.188l15.58-26.906
                               c2.92-5.044,7.288-8.955,12.43-11.319l-30.31,65.825L115.376,309.616z M237.056,84.412l15.792,7.885l-97.044,210.748l-24.416,10.849
                               L237.056,84.412z M198.395,243.896c10.058,0,18.461,7.872,19.133,17.924c0.538,8.001-4.031,15.572-11.365,18.838l-32.357,14.377
                               l23.522-51.083C197.864,243.92,198.262,243.899,198.395,243.896z M267.576,18.131c2.033-4.417,7.284-6.355,11.7-4.325
                               c2.141,0.985,3.77,2.745,4.587,4.956c0.817,2.211,0.725,4.607-0.262,6.748l-25.314,54.973l-15.791-7.885L267.576,18.131z
                                M76.859,352.8c-13.437-19.42-23.526-43.738-21.589-52.042l14.194-60.908c4.847-20.808,18.471-38.442,37.377-48.379l80.643-42.387
                               c2.25-1.183,4.562-2.226,6.924-3.131l-40.511,87.98c-12.822,1.448-24.211,8.846-30.711,20.075l-15.579,26.904
                               c-5.527,9.54-7.278,20.718-4.931,31.474l3.482,15.989c-6.259,6.74-9.907,15.692-9.907,25.15c0,1.639,0.118,3.278,0.334,4.897
                               l-5.072,11.012C88.57,367.301,83.568,362.497,76.859,352.8z M103.661,416.308c-1.437,3.117-4.589,5.131-8.033,5.131
                               c-1.281,0-2.513-0.269-3.666-0.801c-2.143-0.988-3.774-2.75-4.592-4.96c-0.817-2.208-0.725-4.602,0.261-6.741l15.588-33.849
                               c3.542,4.916,8.246,8.89,13.693,11.57l0.197,0.451L103.661,416.308z M154.968,405.09c-7.334,3.194-15.9-0.167-19.098-7.491
                               l-3.122-7.153c0.143,0.002,0.286,0.012,0.429,0.012c3.158,0,6.32-0.402,9.392-1.206l19.118-5.018l0.767,1.76
                               C165.649,393.328,162.288,401.895,154.968,405.09z M201.154,380.296c-1.416,3.606-4.15,6.446-7.701,7.996
                               c-3.548,1.549-7.489,1.624-11.094,0.208c-3.573-1.403-6.386-4.102-7.942-7.606l27.671-7.263
                               C202.302,375.869,202,378.142,201.154,380.296z M231.953,371.492c-3.549,1.55-7.49,1.623-11.096,0.208
                               c-1.313-0.515-2.52-1.209-3.604-2.049l22.255-5.842C238.1,367.159,235.454,369.962,231.953,371.492z"/>
                           </svg>
    
                            </a>
                            <a href="" title="supprimer">
                                <svg fill="red" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
                            </a>
                            
                        </td>
                    </tr>
                {% endfor %}
                {% else %}
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="status-paid"></td>
                        <td></td>
                    
                        <td class="action-buttons">
                        
                         
                            
                        </td>
                    </tr>
                {% endif %}
                    
                    </tbody>
            </table>
    
            <br><br><br><br>
            <hr>

        <div class="payement">
            <div class="icon-dollard">
                
                <?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 94.56 122.88" style="enable-background:new 0 0 94.56 122.88" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M38.14,21.15c-1.9-5.6-3.6-11.25-5.05-17c5.38-5.9,26.15-5.12,32.13-0.09l-5.53,13.15 c2.98-3.91,3.98-5.51,5.75-7.69c0.75,0.49,1.45,1.04,2.11,1.64c1.57,1.42,2.98,3,3.26,5.19c0.18,1.42-0.22,2.87-1.49,4.35 L56.63,35.48c-1.63-0.27-3.23-0.66-4.78-1.21c0.72-1.69,1.59-3.56,2.31-5.25L49.54,34c-4.81-1.02-8.69-0.41-12.29,1.5L24.37,20.05 c-0.76-0.92-1.11-1.84-1.11-2.76c0.01-3.73,5.57-6.96,8.5-8.18L38.14,21.15L38.14,21.15z M54.64,49.06l-2.51-11.49 c10.76,2,28.01,23.89,33.58,33.84c2.84,5.08,5.34,10.68,7.38,16.93c4.06,15.14,0.15,29.3-16.27,32.6 c-10.29,2.07-29.48,2.21-40.3,1.65c-11.63-0.6-29.64-0.58-34.34-12.53c-7.59-19.28,6.32-42.25,19-56.31 c1.67-1.85,3.39-3.57,5.18-5.17c4.61-4.06,9.59-8.87,15.52-10.88l-5.74,10.68l8.33-11.04h4.39L54.64,49.06L54.64,49.06z M49.29,58.49v2.03c2.15,0.23,4,0.67,5.54,1.33c1.54,0.67,2.88,1.67,4.03,3.02c0.91,1.03,1.61,2.09,2.1,3.17 c0.49,1.09,0.74,2.08,0.74,2.99c0,1.01-0.37,1.88-1.1,2.61c-0.74,0.73-1.63,1.1-2.68,1.1c-1.98,0-3.26-1.07-3.84-3.2 c-0.67-2.51-2.26-4.19-4.8-5.01v12.55c2.49,0.68,4.49,1.31,5.96,1.87c1.48,0.56,2.81,1.37,3.97,2.44c1.25,1.1,2.21,2.43,2.89,3.96 c0.67,1.54,1.01,3.22,1.01,5.05c0,2.29-0.53,4.44-1.62,6.43c-1.08,2.01-2.67,3.63-4.76,4.91c-2.1,1.27-4.58,2.02-7.46,2.25v2.05 c0,1.18-0.12,2.05-0.35,2.59c-0.23,0.54-0.73,0.81-1.52,0.81c-0.72,0-1.23-0.22-1.52-0.66c-0.29-0.44-0.43-1.13-0.43-2.06v-2.68 c-2.35-0.26-4.41-0.81-6.17-1.66c-1.76-0.84-3.23-1.89-4.41-3.15c-1.17-1.27-2.05-2.57-2.6-3.92c-0.57-1.36-0.84-2.7-0.84-4 c0-0.96,0.37-1.83,1.13-2.6c0.75-0.77,1.69-1.16,2.81-1.16c0.91,0,1.67,0.21,2.3,0.63c0.62,0.42,1.05,1.02,1.3,1.78 c0.54,1.65,1.01,2.91,1.41,3.79c0.41,0.87,1.02,1.68,1.83,2.4c0.81,0.72,1.89,1.28,3.24,1.66V85.79c-2.7-0.75-4.94-1.57-6.75-2.49 c-1.81-0.92-3.28-2.21-4.4-3.9c-1.12-1.69-1.69-3.86-1.69-6.51c0-3.46,1.1-6.3,3.3-8.5c2.2-2.21,5.38-3.5,9.54-3.86v-1.97 c0-1.69,0.64-2.53,1.9-2.53C48.65,56.02,49.29,56.84,49.29,58.49L49.29,58.49z M45.46,77.95V66.4c-1.69,0.5-3.01,1.16-3.95,1.99 c-0.95,0.82-1.42,2.08-1.42,3.75c0,1.58,0.44,2.79,1.33,3.6C42.3,76.55,43.65,77.29,45.46,77.95L45.46,77.95z M49.29,86.9v13.22 c2.03-0.4,3.59-1.21,4.7-2.44c1.1-1.24,1.66-2.66,1.66-4.29c0-1.75-0.54-3.1-1.62-4.06C52.96,88.37,51.38,87.56,49.29,86.9 L49.29,86.9z"/></g></svg>
                <p class="about">Une fois le payement enregister, le recus sera genéré automatiquement</p>
            </div>
            
            <div class="profile-form-container">
                {% if formError  %}
                <div style="background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 15px; border-radius: 5px; font-family: sans-serif; display: flex; align-items: center;">
                    <span style="font-size: 24px; margin-right: 10px;">&#9888;</span>
                    <div>
                      <h4 style="margin-top: 0; margin-bottom: 5px;">Erreur de saisie : informations requises</h4>
                      <ul style="margin: 0; padding-left: 20px;">
                        <li><strong>La date</strong> ne doit pas etre vide et doit être au format JJ/MM/AAAA (ex: 01/05/2010).</li>
                        <li><strong>Le montant de location</strong> est obligatoire et doit être un nombre.</li>
                        <li>Le<strong>mois</strong>  de loyer  est pas obligatoire  </li>
                      </ul>
                    </div>
                  </div>
                {% endif %}
                <h2>Enregistrer Un Payement</h2>
            
                <div class="form-section">
                    <form class="form-group" method="post" action="{% url 'historique_maison' id=payements.0.id %}">
                        {% csrf_token %}
                        <input type="number" name="annee" hidden value="{{ payements.0.annee }}">
                        <div class="form-field">
                            <label for="telephone">Montant</label>
                            <input required type="number" id="telephone" name="montant" placeholder="Montant en $">
                        </div>
                        <div class="form-field">
                            <label for="email">Mois conserner</label>
                            <select name="mois" id="" required>
                                <option value="1">Janvier</option>
                                <option value="2">Février</option>
                                <option value="3">Mars</option>
                                <option value="4">Avril</option>
                                <option value="5">Mai</option>
                                <option value="6">Juin</option>
                                <option value="7">Juillet</option>
                                <option value="8">Août</option>
                                <option value="9">Semptembre</option>
                                <var><option value="10">Octobre</option>
                                <option value="11">Novembre</option>
                                <option value="12">Décembre</option>
                            </select>
                            
                        </div>
                        <div class="form-field">
                            <label for="pays">Date de payement</label>
                            <input required type="date" id="pays" name="date_payement" placeholder="Entrez le pays">
                        </div>
                        <div class="form-field">
                            <label for="ville">Observations</label>
                            <select name="observation" id="">
                                <option value="Totalité">Totalité</option>
                                <option value="Partie">Partie</option>
                                
                            </select>
                            
                        </div>
                        <div class="parent-submit">
                        <button type="submit" class="submit-button">Enregistrer le payement</button>
                        </div>
                    </form>
                </div>
                
            
            </div>
            
            
    
        </div>    
        </div>
</div>
<script src="{% static 'java/jquery.js' %}"></script>
<script src="{% static 'java/java_all.js' %}"></script>
<script src="{% static 'app_general/java/app_general.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
   
    $(document).ready(function() 
    {
        
        var dashbord = $('#icon-dashbord');
         //.css('width','50px').css('height','50px');

        dashbord.attr('fill', '#f39c12');
        var svg_profile =$('.svg_gestion');

        svg_profile.attr('fill','#f39c12').css('width','40px').css('height','40px').css('background-color','#eee').css('padding','5px');
      
        
    });
    
</script>
</body>
</html>