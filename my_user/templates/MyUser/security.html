{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="stylesheet"   media="(min-width:900px)" href="{% static 'css/menu_desktop.css' %}">
    <link rel="stylesheet"   media="(max-width:900px)" href="{% static 'css/menu_mobile.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"   media="(max-width:900px)" href="{% static 'blog/css/blog_mobile.css' %}">
    <link rel="stylesheet"  media="(min-width:900px)"  href="{% static 'my_user/css/security.css' %}">
    
    
    <title>EsikaApp</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">


      
</head>
<body>

    
    <div id="page_">

        {% include 'menu_desktop.html' %}

        <div id="cacher"></div>
        {% include 'petit_menu_ordi_user.html' %}
<div class="main-content">



    <div class="container">
        <div class="block-1">
        <h1 id="grand-title"> S√©curit√© et Cr√©ation de Votre Cl√© Priv√©e pour la Signature de Documents</h1>
        <span class="line"></span>
        <div class="about">

            Ce processus configure votre Identit√© Num√©rique en liant votre 
            cl√© priv√©e unique et la reconnaissance faciale, vous cr√©ez une 
            signature num√©rique incontestable pour vos documents. Ces documents sign√©s 
            sont ensuite ancr√©s sur le r√©seau Hedera (DLT), les rendant inviolables, 
            horodat√©s et v√©rifiables par QR code,
            vous offrant une preuve de document qui est votre seule et unique autorit√©.
        </div>
        <p class="document">
                <img src="{% static 'img/document.jpeg' %}" alt="">
        </p>
        <section class="process-step">
            
                <li>
                    Signature Num√©rique : Une fois vos informations v√©rifi√©es, 
                    nous g√©n√©rerons une paire de cl√©s cryptographiques 
                    (publique/priv√©e).
                </li>
                <li>
                    Cl√© Priv√©e (Secret) : Cette cl√© vous permettra de 
                    signer num√©riquement les documents. 
                    Elle est votre identifiant unique et ne doit jamais √™tre 
                    partag√©e. Vous serez invit√©(e) √† la t√©l√©charger et √† 
                    la garder en s√©curit√©.
                </li>
                <li>
                    Cl√© Publique : Utilis√©e par le syst√®me pour v√©rifier
                     que la signature provient bien de votre cl√© priv√©e. 
                     Elle est publique et n'a pas besoin d'√™tre cach√©e.
                </li>
                <li>
                    Ancrage Blockchain (Hedera) : La signature et la preuve de paiement seront ancr√©es 
                    sur le r√©seau Hedera, garantissant que le document est immuable
                     et peut √™tre v√©rifi√© √† tout moment.
                </li>
            </ul>
        </section>

       
        <div class="security-note">
            ‚ö†Ô∏è Note de S√©curit√© : Une fois la cl√© g√©n√©r√©e, vous serez invit√©(e) √† la t√©l√©charger. 
            Nous ne conservons pas votre cl√© priv√©e ni mot de passe. 
            En cas de perte, vous ne pourrez plus signer de documents sans cr√©e une autre.
        </div>
        </div>
        <div class="block-2">
            {% if messages %}
    <div style="padding: 10px; margin-bottom: 20px;">
        {% for message in messages %}
            {% if message.tags == 'error' %}
                <div style="background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 4px;">
                    üö® **Erreur :** {{ message }}
                </div>
            {% else %}
                 <div style="background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; padding: 10px; border-radius: 4px;">
                    ‚úÖ {{ message }}
                </div>
            {% endif %}
        {% endfor %}
    </div>
    
{% endif %}

            <div class="container-form">
        <h1>üì∏ Configuration de la Reconnaissance Faciale</h1>
        
        <form id="security-form" action="{% url 'security' %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %} 
            
            <div class="form-group">
                <label>Capture Faciale :    Appuyer sur  la zone</label>
                <div id="video-container">
                    <video id="camera-feed" autoplay playsinline>
                
                    </video>
                </div>
                <button type="button" id="capture-btn" class="btn-capture">Prendre la Photo</button>
                <img id="captured-image-preview" alt="Aper√ßu de la photo captur√©e">
                
                <input type="hidden" name="verification_faciale" id="photo-faciale-base64">
            </div>
            
            <hr>

            <div class="form-group">
                <label for="signature_photo">‚úçÔ∏è Photo de Votre Signature Manuscrite :</label>
                <input type="file" id="signature_photo" name="signature" accept="image/*" required>
            </div>
            
            <div class="form-group">
                <label for="id_hedera">üÜî ID de Compte Hedera :</label>
                <input type="text" id="id_hedera" name="id_hedera" required>
            </div>
            <div class="form-group">
                    <label for="numero_bancaire">üí≥ Num√©ro Bancaire (IBAN ou √©quivalent) :</label>
                    <input type="text" id="numero_bancaire" name="numero_bancaire" required>
                </div>

                <div class="form-group">
                    <label for="numero_paiement_mobile">üì± Num√©ro Paiement Mobile (M-Pesa, Orange Money, etc.) :</label>
                    <input type="text" id="numero_paiement_mobile" name="paiement_mobile" required>
                </div>
            
            <div class="form-group">
                <label for="mot_de_passe">üîë Mot de Passe Ma√Ætre :</label>
                <input type="password" id="mot_de_passe" name="password" required>
            </div>

            <button type="submit" class="btn-submit">Soumettre et Cr√©er la Cl√© Priv√©e</button>

        </form>
        
        <canvas id="camera-canvas"></canvas>
    </div>


        </div>
        
    </div>
    <hr>

    <div class="manuscrite-signature">
        <div class="about">

            Ce processus configure votre Identit√© Num√©rique en liant votre 
            cl√© priv√©e unique et la reconnaissance faciale, vous cr√©ez une 
            signature num√©rique incontestable pour vos documents. Ces documents sign√©s 
            sont ensuite ancr√©s sur le r√©seau Hedera (DLT), les rendant inviolables, 
            horodat√©s et v√©rifiables par QR code,
            vous offrant une preuve de document qui est votre seule et unique autorit√©.
        </div>

        <div class="image-signature">
            <p class="contnt-signature"><img src="{% static 'img/signature1.jpg' %}" alt=""></p>
            <p class="resultat"> r√©sultat </p>
            <p class="contnt-signature"><img src="{% static 'img/signature2.jpg' %}" alt=""></p>

        </div>
    </div>
    
</div>
</div>

<script src="{% static 'java/jquery.js' %}"></script>
<script src="{% static 'java/java_all.js' %}"></script>
<script src="{% static 'my_user/java/security.js' %}"></script>

    <script>
        $(document).ready(function() 
        {
        var svg_profile =$('.svg_security');

        svg_profile.attr('fill','#f39c12').css('width','40px').css('height','40px').css('background-color','#eee').css('padding','5px');
        
        });
    </script>
<script>
    // V√©rifie si cette page est charg√©e juste apr√®s un POST de s√©curit√©
    // Cela n√©cessite que la vue 'security' stocke un indicateur dans la session
    // ou qu'elle ajoute un param√®tre √† l'URL de la redirection vers '/security/download/'

    

</script>
</body>
</html>